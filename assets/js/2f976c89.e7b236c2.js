"use strict";(self.webpackChunkdocumentation_technology=self.webpackChunkdocumentation_technology||[]).push([[5227],{3905:function(e,t,o){o.d(t,{Zo:function(){return m},kt:function(){return d}});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var r=n.createContext({}),c=function(e){var t=n.useContext(r),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},m=function(e){var t=c(e.components);return n.createElement(r.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),p=c(o),d=a,h=p["".concat(r,".").concat(d)]||p[d]||u[d]||i;return o?n.createElement(h,l(l({ref:t},m),{},{components:o})):n.createElement(h,l({ref:t},m))}));function d(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=o.length,l=new Array(i);l[0]=p;var s={};for(var r in t)hasOwnProperty.call(t,r)&&(s[r]=t[r]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var c=2;c<i;c++)l[c]=o[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},2748:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return s},contentTitle:function(){return r},metadata:function(){return c},assets:function(){return m},toc:function(){return u},default:function(){return d}});var n=o(7462),a=o(3366),i=(o(7294),o(3905)),l=["components"],s={sidebar_position:7},r="Troubleshooting Teams",c={unversionedId:"microsoft-teams/troubleshooting-teams",id:"microsoft-teams/troubleshooting-teams",title:"Troubleshooting Teams",description:"Teams disconnecting during dialling",source:"@site/Telephony/microsoft-teams/troubleshooting-teams.md",sourceDirName:"microsoft-teams",slug:"/microsoft-teams/troubleshooting-teams",permalink:"/Telephony/microsoft-teams/troubleshooting-teams",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"External Access",permalink:"/Telephony/microsoft-teams/teams-user-management/external-access"},next:{title:"Skype for Business",permalink:"/Telephony/skype-for-business/intro"}},m={},u=[{value:"Teams disconnecting during dialling",id:"teams-disconnecting-during-dialling",level:2},{value:"Issue",id:"issue",level:3},{value:"Explanation",id:"explanation",level:3},{value:"Solution",id:"solution",level:3},{value:"User cannot dial out",id:"user-cannot-dial-out",level:2},{value:"Issue",id:"issue-1",level:3},{value:"Explanation",id:"explanation-1",level:3},{value:"Solution",id:"solution-1",level:3},{value:"User cannot collaborate with External user",id:"user-cannot-collaborate-with-external-user",level:2},{value:"Issue",id:"issue-2",level:3},{value:"Explanation",id:"explanation-2",level:3},{value:"Solution",id:"solution-2",level:3},{value:"Teams gets stuck loading - MacOS",id:"teams-gets-stuck-loading---macos",level:2},{value:"Issue",id:"issue-3",level:3},{value:"Explanation",id:"explanation-3",level:3},{value:"Solution",id:"solution-3",level:3},{value:"Cannot find a room for a meeting",id:"cannot-find-a-room-for-a-meeting",level:2},{value:"Issue",id:"issue-4",level:3},{value:"Explanation",id:"explanation-4",level:3},{value:"Solution",id:"solution-4",level:3},{value:"Poor call quality",id:"poor-call-quality",level:2},{value:"Issue",id:"issue-5",level:3},{value:"Explanation",id:"explanation-5",level:3},{value:"Solution",id:"solution-5",level:3},{value:"General phone calls",id:"general-phone-calls",level:4},{value:"User level calls",id:"user-level-calls",level:4},{value:"Some tools at your disposal to help you troubleshoot the network:",id:"some-tools-at-your-disposal-to-help-you-troubleshoot-the-network",level:4}],p={toc:u};function d(e){var t=e.components,o=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"troubleshooting-teams"},"Troubleshooting Teams"),(0,i.kt)("h2",{id:"teams-disconnecting-during-dialling"},"Teams disconnecting during dialling"),(0,i.kt)("h3",{id:"issue"},"Issue"),(0,i.kt)("p",null,"Microsoft teams desktop app disconnects during dialling, once connected to participant it immediately closes"),(0,i.kt)("h3",{id:"explanation"},"Explanation"),(0,i.kt)("p",null,'Some users headsets have "Call buttons" and sometimes they get "stuck" and just automatically disconnect the call whenever you answer'),(0,i.kt)("h3",{id:"solution"},"Solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Try a different calling device (new headset) - normally this resolves it, however should you require more steps:"),(0,i.kt)("li",{parentName:"ol"},"Try ",(0,i.kt)("a",{parentName:"li",href:"https://teams.microsoft.com"},"https://teams.microsoft.com")),(0,i.kt)("li",{parentName:"ol"},"Try re-installing Teams"),(0,i.kt)("li",{parentName:"ol"},"Try re-logging user in and out of teams"),(0,i.kt)("li",{parentName:"ol"},"Update headset device driver")),(0,i.kt)("h2",{id:"user-cannot-dial-out"},"User cannot dial out"),(0,i.kt)("h3",{id:"issue-1"},"Issue"),(0,i.kt)("p",null,"User cannot dial out but can answer incoming calls from internal staff"),(0,i.kt)("h3",{id:"explanation-1"},"Explanation"),(0,i.kt)("p",null,"In order for a user to dial out, they need to meet a certain criteria:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Have the relevant licenses applied"),(0,i.kt)("li",{parentName:"ul"},"Enterprise voice enabled"),(0,i.kt)("li",{parentName:"ul"},"Valid phone number"),(0,i.kt)("li",{parentName:"ul"},"Valid voice routing policy"),(0,i.kt)("li",{parentName:"ul"},"Valid dial plan")),(0,i.kt)("p",null,"References:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/microsoftteams/business-voice/whats-business-voice"},"https://docs.microsoft.com/en-us/microsoftteams/business-voice/whats-business-voice")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/powershell/module/teams/connect-microsoftteams?view=teams-ps"},"https://docs.microsoft.com/en-us/powershell/module/teams/connect-microsoftteams?view=teams-ps")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/microsoftteams/troubleshoot/teams-conferencing/no-dial-pad"},"https://docs.microsoft.com/en-us/microsoftteams/troubleshoot/teams-conferencing/no-dial-pad"))),(0,i.kt)("h3",{id:"solution-1"},"Solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Logon to ",(0,i.kt)("a",{parentName:"li",href:"https://admin.microsoft.com"},"https://admin.microsoft.com"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Browse Users > Find user"),(0,i.kt)("li",{parentName:"ol"},"Browse Licenses and apps"),(0,i.kt)("li",{parentName:"ol"},"Ensure user has a Phone System license"))),(0,i.kt)("li",{parentName:"ol"},"Logon to ",(0,i.kt)("a",{parentName:"li",href:"https://admin.teams.microsoft.com"},"https://admin.teams.microsoft.com"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Browse Users > Manage Users and select your user"),(0,i.kt)("li",{parentName:"ol"},'Ensure user has a valid phone number under "General Information - Assigned phone number"'),(0,i.kt)("li",{parentName:"ol"},"Ensure user has right voice routing and dial plan policy under Policies"),(0,i.kt)("li",{parentName:"ol"},'If the user has a UK and Newcastle number, our Dial plan standard would look like "UK-Newcastle'),(0,i.kt)("li",{parentName:"ol"},'If the user has a UK and Newcastle number, our Voice routing policy standard would look like "UK-Newcastle-International" - this means users can dial out internationally - you may notice "-Local" and "-National", these policies restrict the calls a user can place'))),(0,i.kt)("li",{parentName:"ol"},"Connect up to MS Teams through powershell: Connect-MicrosoftTeams",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"For users with phone number assigned from Microsoft, run the following command:")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Get-CsOnlineVoiceUser example.user@domain.com | UserPrincipalName, EnterpriseVoiceEnabled, OnPremEnterpriseVoiceEnabled, RegistrarPool, VoiceRoutingPolicy, OnlineVoiceRoutingPolicy, DialPlan, TenantDialPlan, OnPremLineURI, LineURI"))),(0,i.kt)("ol",{parentName:"li",start:2},(0,i.kt)("li",{parentName:"ol"},"For users with a phone number provided by an outside carrier (Direct Routing), run the following command:")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Get-CsOnlineVoiceUser example.user@domain.com | UserPrincipalName, EnterpriseVoiceEnabled, OnPremEnterpriseVoiceEnabled, RegistrarPool, VoiceRoutingPolicy, OnlineVoiceRoutingPolicy, DialPlan, TenantDialPlan, OnPremLineURI, LineURI"))),(0,i.kt)("ol",{parentName:"li",start:3},(0,i.kt)("li",{parentName:"ol"},"These commands will give you an insight to the users enterprise voice settings, phone number, voice routing policies assigned and dial plans"))),(0,i.kt)("li",{parentName:"ol"},"If the user has the correct settings and they still cannot call out - try running an LX trace on the SBC or checking the Teams reporting. If the user's callee number is Anonymous - this means that some carriers automatically reject anonymous calls. The reason the user may seem to be calling as anonymous, is that they don't have a number under their Dial Pad on the Calls menu. To rectify this you can re-assign the LineURI and reassign the Voice routing policy of the user")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'Set-CsUser joe.bloggs@domain.com -onpremlineuri $Null\nSet-CsUser joe.bloggs@domain.com -onpremlineuri "tel:01914662443"\nGrant-CsOnlineVoiceRoutingPolicy -Identity user@domain.com -PolicyName $Null\nGrant-CsOnlineVoiceRoutingPolicy -Identity user@domain.com -PolicyName "UK-Birmingham-International"\n')),(0,i.kt)("h2",{id:"user-cannot-collaborate-with-external-user"},"User cannot collaborate with External user"),(0,i.kt)("h3",{id:"issue-2"},"Issue"),(0,i.kt)("p",null,"User cannot collaborate with an external user within Teams"),(0,i.kt)("h3",{id:"explanation-2"},"Explanation"),(0,i.kt)("p",null,"This depends on the external access set at a global level within Microsoft Teams itself"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"References:"),"\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-US/microsoftteams/manage-external-access?WT.mc_id=TeamsAdminCenterCSH"},"https://docs.microsoft.com/en-US/microsoftteams/manage-external-access?WT.mc_id=TeamsAdminCenterCSH")),(0,i.kt)("h3",{id:"solution-2"},"Solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Logon to ",(0,i.kt)("a",{parentName:"li",href:"https://admin.teams.microsoft.com"},"https://admin.teams.microsoft.com")),(0,i.kt)("li",{parentName:"ol"},"Browse > Users > External Access"),(0,i.kt)("li",{parentName:"ol"},"Under the option: Choose which external domains your users have access to:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Allow all external domains: This is the default setting in Teams, and it lets people in your organization find, call, chat, and set up meetings with people external to your organization in any domain."),(0,i.kt)("li",{parentName:"ol"},"Allow only specific external domains: By adding domains to an Allow list, you limit external access to only the allowed domains. Once you set up a list of allowed domains, all other domains will be blocked. To allow specific domains, click Add a domain, add the domain name, click Action to take on this domain, and then select Allowed."),(0,i.kt)("li",{parentName:"ol"},"Block specific domains - By adding domains to a Block list, you can communicate with all external domains except the ones you've blocked. To block specific domains, click Add a domain, add the domain name, click Action to take on this domain, and then select Blocked. Once you set up a list of blocked domains, all other domains will be allowed."),(0,i.kt)("li",{parentName:"ol"},"Block all external domains - Prevents people in your organization from finding, calling, chatting, and setting up meetings with people external to your organization in any domain."))),(0,i.kt)("li",{parentName:"ol"},"Choose the option you wish to select carefully - the company may have a policy in place that restricts access to other Teams/Skype for Business users, or they may restrict it to a certain domain. Altering this setting will have a global effect on every user - make sure this goes through change control process")),(0,i.kt)("h2",{id:"teams-gets-stuck-loading---macos"},"Teams gets stuck loading - MacOS"),(0,i.kt)("h3",{id:"issue-3"},"Issue"),(0,i.kt)("p",null,"For MacOS:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"When launching Teams it gets stuck at the loading page."),(0,i.kt)("li",{parentName:"ul"},"If you click the Teams icon on the task bar there will be a blank/white screen open for Teams."),(0,i.kt)("li",{parentName:"ul"},"If you right click the Teams icon and press sign out nothing happens.")),(0,i.kt)("h3",{id:"explanation-3"},"Explanation"),(0,i.kt)("p",null,"Teams may have become corrupt"),(0,i.kt)("h3",{id:"solution-3"},"Solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open Finder"),(0,i.kt)("li",{parentName:"ol"},"Go to folder ~/Library/"),(0,i.kt)("li",{parentName:"ol"},"Go to Application Support"),(0,i.kt)("li",{parentName:"ol"},"Delete Teams folder and delete the Teams folder inside the Microsoft folder"),(0,i.kt)("li",{parentName:"ol"},"Then back inside Library go to Preferences and delete com.microsoft.teams.plist"),(0,i.kt)("li",{parentName:"ol"},"Drag Microsoft Teams app to the bin"),(0,i.kt)("li",{parentName:"ol"},"Reinstall using pkg found online"),(0,i.kt)("li",{parentName:"ol"},"When it launches it will have the users email auto remembered > Ignore this and click 'sign in with another account'"),(0,i.kt)("li",{parentName:"ol"},"This should redirect to Microsoft sign in screen > Sign in with their account (work or school account) and then Teams should Launch correctly."),(0,i.kt)("li",{parentName:"ol"},"If this fails shut down and boot with NVRAM by pressing Command + Option + P + R as it boots up and then repeat steps 1-9."),(0,i.kt)("li",{parentName:"ol"},"If it still fails repeat steps 1-8 then at step 9 log in with your own account and see if it works. Then sign out and relaunch teams and you should be able to select sign in with another account again.")),(0,i.kt)("h2",{id:"cannot-find-a-room-for-a-meeting"},"Cannot find a room for a meeting"),(0,i.kt)("h3",{id:"issue-4"},"Issue"),(0,i.kt)("p",null,'When attempting to create a meeting and find the room that you wish to use, it does not appear in the location and you get "Sorry, we could not find any building"'),(0,i.kt)("h3",{id:"explanation-4"},"Explanation"),(0,i.kt)("p",null,"This is because no distribution groups have been created."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Reference:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://answers.microsoft.com/en-us/msteams/forum/all/adding-roomresource-while-creating-a-ms-teams/069355ff-7e1d-47f4-a545-5aaddb01817c"},"https://answers.microsoft.com/en-us/msteams/forum/all/adding-roomresource-while-creating-a-ms-teams/069355ff-7e1d-47f4-a545-5aaddb01817c"))),(0,i.kt)("h3",{id:"solution-4"},"Solution"),(0,i.kt)("p",null,"Open powershell and issue the following commands"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'Connect-ExchangeOnline\nNew-DistributionGroup -Name "MS Teams Meeting Room" -RoomList\nAdd-DistributionGroupMember -Identity \u201cMS Teams Meeting Room\u201d -Member \u201cname of the room/resource mailbox here"\n')),(0,i.kt)("h2",{id:"poor-call-quality"},"Poor call quality"),(0,i.kt)("h3",{id:"issue-5"},"Issue"),(0,i.kt)("p",null,"The user is complaining of poor call quality"),(0,i.kt)("h3",{id:"explanation-5"},"Explanation"),(0,i.kt)("p",null,"The user may have a networking issue"),(0,i.kt)("h3",{id:"solution-5"},"Solution"),(0,i.kt)("p",null,"Find the phone call that had the networking issue by checking out the reporting:"),(0,i.kt)("h4",{id:"general-phone-calls"},"General phone calls"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Logon to ",(0,i.kt)("a",{parentName:"li",href:"https://admin.teams.microsoft.com/"},"https://admin.teams.microsoft.com/")),(0,i.kt)("li",{parentName:"ol"},"Browse Analytics & Reports > Usage Reports"),(0,i.kt)("li",{parentName:"ol"},"Select PSTN and SMS (preview) usage"),(0,i.kt)("li",{parentName:"ol"},"Select last 7 days"),(0,i.kt)("li",{parentName:"ol"},"From here you can see how calls routed")),(0,i.kt)("h4",{id:"user-level-calls"},"User level calls"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Logon to ",(0,i.kt)("a",{parentName:"li",href:"https://admin.teams.microsoft.com"},"https://admin.teams.microsoft.com")),(0,i.kt)("li",{parentName:"ol"},"Browse Users > Manage Users"),(0,i.kt)("li",{parentName:"ol"},"Find the user in question and click on their name"),(0,i.kt)("li",{parentName:"ol"},"Click Meetings & calls"),(0,i.kt)("li",{parentName:"ol"},"Observe ongoing calls and past calls")),(0,i.kt)("h4",{id:"some-tools-at-your-disposal-to-help-you-troubleshoot-the-network"},"Some tools at your disposal to help you troubleshoot the network:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.microsoft.com/en-us/download/details.aspx?id=53885"},"https://www.microsoft.com/en-us/download/details.aspx?id=53885")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.powershellgallery.com/packages/NetworkTestingCompanion/1.5.5"},"https://www.powershellgallery.com/packages/NetworkTestingCompanion/1.5.5")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://connectivity.office.com/"},"https://connectivity.office.com/"))),(0,i.kt)("p",null,"Network requirements of Teams:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/microsoftteams/prepare-network#bandwidth-requirements"},"https://docs.microsoft.com/en-us/microsoftteams/prepare-network#bandwidth-requirements"))))}d.isMDXComponent=!0}}]);