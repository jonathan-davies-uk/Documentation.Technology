"use strict";(self.webpackChunkdocumentation_technology=self.webpackChunkdocumentation_technology||[]).push([[5458],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),p=u(n),d=r,h=p["".concat(s,".").concat(d)]||p[d]||c[d]||i;return n?a.createElement(h,l(l({ref:t},m),{},{components:n})):a.createElement(h,l({ref:t},m))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1560:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return u},assets:function(){return m},toc:function(){return c},default:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),l=["components"],o={sidebar_position:1},s="Requirements and Prerequisites",u={unversionedId:"microsoft-teams/requirements-and-prerequisites",id:"microsoft-teams/requirements-and-prerequisites",title:"Requirements and Prerequisites",description:"Microsoft Teams Planning",source:"@site/blueprints/microsoft-teams/requirements-and-prerequisites.md",sourceDirName:"microsoft-teams",slug:"/microsoft-teams/requirements-and-prerequisites",permalink:"/blueprints/microsoft-teams/requirements-and-prerequisites",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"8. Configure Windows 10 AOVPN Connections",permalink:"/blueprints/always-on-vpn/configure-windows-10-aovpn-connections"},next:{title:"1. Connect your SBC",permalink:"/blueprints/microsoft-teams/setup-your-sbc"}},m={},c=[{value:"Microsoft Teams Planning",id:"microsoft-teams-planning",level:2},{value:"Assumptions",id:"assumptions",level:3},{value:"Licenses",id:"licenses",level:3},{value:"Base Plan",id:"base-plan",level:4},{value:"Voice calling options",id:"voice-calling-options",level:4},{value:"User setup Permissions",id:"user-setup-permissions",level:3},{value:"Planning diagram",id:"planning-diagram",level:3},{value:"Networking Requirements",id:"networking-requirements",level:3},{value:"SIP Signalling Ports",id:"sip-signalling-ports",level:4},{value:"Media Ports",id:"media-ports",level:4},{value:"Microsoft terms (glossary)",id:"microsoft-terms-glossary",level:2},{value:"Microsoft Teams (MS Teams)",id:"microsoft-teams-ms-teams",level:3},{value:"MS Teams Phone System",id:"ms-teams-phone-system",level:3},{value:"Teams Admin Center (TAC)",id:"teams-admin-center-tac",level:3},{value:"Direct Routing",id:"direct-routing",level:3},{value:"Session Border Controller (SBC)",id:"session-border-controller-sbc",level:3},{value:"Voice routes",id:"voice-routes",level:3},{value:"Voice Routing Policies (VRP)",id:"voice-routing-policies-vrp",level:3},{value:"Dial Plan (DP)",id:"dial-plan-dp",level:3}],p={toc:c};function d(e){var t=e.components,o=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"requirements-and-prerequisites"},"Requirements and Prerequisites"),(0,i.kt)("h2",{id:"microsoft-teams-planning"},"Microsoft Teams Planning"),(0,i.kt)("p",null,"This Microsoft Teams blueprint will harness MS Teams Direct Routing. Direct Routing allows you to bring a number from a carrier into Microsoft by harnessing SBC's."),(0,i.kt)("p",null,"This Microsoft Teams blueprint ",(0,i.kt)("strong",{parentName:"p"},"will not cover")," Microsoft Phone numbers."),(0,i.kt)("h3",{id:"assumptions"},"Assumptions"),(0,i.kt)("p",null,"This blueprint assumes that you already have a domain controller setup, with the relevant users that are synced to Microsoft 365 with Azure AD connect. This setup also assumes that you already have a carrier that provides you with phone number range, and that a SIP trunk is already setup to an SBC and from that SBC, direct routing configuration on the SBC has already been setup. This guide will only be running through the Teams setup of Direct Routing. It is already assumed that the network has been prepared with the relevant ports open; a list of the networking requirements can be viewed below."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"SBC FQDN: sbc.domain.com - must be an encrypted SIP trunk bound with a certficiate"),(0,i.kt)("li",{parentName:"ul"},"SIP Signalling Port: 5061"),(0,i.kt)("li",{parentName:"ul"},"Phone number range: 02074445500 - 02074445539 ")),(0,i.kt)("h3",{id:"licenses"},"Licenses"),(0,i.kt)("p",null,"At least one of base plan and voice calling options licenses must be assigned to users in order to use Microsoft Teams and then use the Phone System."),(0,i.kt)("h4",{id:"base-plan"},"Base Plan"),(0,i.kt)("p",null,"The base plans licenses will cover the user to be able to install the Microsoft Teams applications, the licenses that include Microsoft Teams include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"MS 365 Business Basic/Standard/Business Premium"),(0,i.kt)("li",{parentName:"ul"},"MS Teams Essenttial (AAD Identity)"),(0,i.kt)("li",{parentName:"ul"},"MS 365 Enterprise E1/E3/E5"),(0,i.kt)("li",{parentName:"ul"},"Office 365 Enterprise E1/E3/E5"),(0,i.kt)("li",{parentName:"ul"},"MS 365 F1/F3"),(0,i.kt)("li",{parentName:"ul"},"Office 365 F3")),(0,i.kt)("h4",{id:"voice-calling-options"},"Voice calling options"),(0,i.kt)("p",null,"The voice calling options allow the user to make a phone call through MS Teams. Without this license, a user will not be able to make or receive external phone calls. The licenses that include voice calling options include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Microsoft Phone System"),(0,i.kt)("li",{parentName:"ul"},"Microsoft Teams Phone (without Calling Plan)")),(0,i.kt)("h3",{id:"user-setup-permissions"},"User setup Permissions"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Teams Administrator or Global Administrator")),(0,i.kt)("h3",{id:"planning-diagram"},"Planning diagram"),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"Two Tier PKI",src:n(3071).Z,width:"1871",height:"1323"})),(0,i.kt)("h3",{id:"networking-requirements"},"Networking Requirements"),(0,i.kt)("h4",{id:"sip-signalling-ports"},"SIP Signalling Ports"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Traffic"),(0,i.kt)("th",{parentName:"tr",align:null},"From"),(0,i.kt)("th",{parentName:"tr",align:null},"To"),(0,i.kt)("th",{parentName:"tr",align:null},"Source Port"),(0,i.kt)("th",{parentName:"tr",align:null},"Destination Port"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SIP/TLS"),(0,i.kt)("td",{parentName:"tr",align:null},"52.112.0.0/14, 52.120.0.0/14"),(0,i.kt)("td",{parentName:"tr",align:null},"sbc.domain.com"),(0,i.kt)("td",{parentName:"tr",align:null},"1024 - 65535"),(0,i.kt)("td",{parentName:"tr",align:null},"5061")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SIP/TLS"),(0,i.kt)("td",{parentName:"tr",align:null},"sbc.domain.com"),(0,i.kt)("td",{parentName:"tr",align:null},"52.112.0.0/14, 52.120.0.0/14"),(0,i.kt)("td",{parentName:"tr",align:null},"any"),(0,i.kt)("td",{parentName:"tr",align:null},"5061")))),(0,i.kt)("h4",{id:"media-ports"},"Media Ports"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Traffic"),(0,i.kt)("th",{parentName:"tr",align:null},"From"),(0,i.kt)("th",{parentName:"tr",align:null},"To"),(0,i.kt)("th",{parentName:"tr",align:null},"Source Port"),(0,i.kt)("th",{parentName:"tr",align:null},"Destination Port"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"UDP/SRTP"),(0,i.kt)("td",{parentName:"tr",align:null},"52.112.0.0/14, 52.120.0.0/14"),(0,i.kt)("td",{parentName:"tr",align:null},"sbc.domain.com"),(0,i.kt)("td",{parentName:"tr",align:null},"3478 - 3481 and 49152 - 53247"),(0,i.kt)("td",{parentName:"tr",align:null},"5061")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"UDP/SRTP"),(0,i.kt)("td",{parentName:"tr",align:null},"sbc.domain.com"),(0,i.kt)("td",{parentName:"tr",align:null},"52.112.0.0/14, 52.120.0.0/14"),(0,i.kt)("td",{parentName:"tr",align:null},"any"),(0,i.kt)("td",{parentName:"tr",align:null},"3478 - 3481 and 49152 - 53247")))),(0,i.kt)("h2",{id:"microsoft-terms-glossary"},"Microsoft terms (glossary)"),(0,i.kt)("p",null,"The Microsoft Teams terms you see below are terms that will be used throughout this blueprint setup. Make yourself familiar with them, as I'll likely be using the abbreviations. "),(0,i.kt)("h3",{id:"microsoft-teams-ms-teams"},"Microsoft Teams (MS Teams)"),(0,i.kt)("p",null,"Microsoft Teams is a collaboration tool used between teams for the likes of chat, group conversation, phone system, meetings, live events, channels and teams."),(0,i.kt)("h3",{id:"ms-teams-phone-system"},"MS Teams Phone System"),(0,i.kt)("p",null,"MS Teams as a Phone System allows you to make external calls and receive external calls into the MS Teams application."),(0,i.kt)("h3",{id:"teams-admin-center-tac"},"Teams Admin Center (TAC)"),(0,i.kt)("p",null,"The TAC is predominantly used to setup MS Teams for Direct Routing. It can be accessed from the following URL: ",(0,i.kt)("a",{parentName:"p",href:"https://admin.teams.microsoft.com"},"https://admin.teams.microsoft.com")," with a Teams Administrator or Global Administrator account."),(0,i.kt)("h3",{id:"direct-routing"},"Direct Routing"),(0,i.kt)("p",null,"Direct Routing allows you to connect a supported SBC to MS Teams Phone System. This means you can carry across your own phone range to Microsoft Teams, without purchasing any newer DDI's."),(0,i.kt)("h3",{id:"session-border-controller-sbc"},"Session Border Controller (SBC)"),(0,i.kt)("p",null,"An SBC is essentially a firewall for phones. The SBC in this instance will be used to connect a telephony provider to MS Teams through Direct Routing. A SIP trunk will be setup with the PSTN provider and an encrypted SIP trunk will be setup using Direct Routing to MS Teams."),(0,i.kt)("h3",{id:"voice-routes"},"Voice routes"),(0,i.kt)("p",null,"Voice routes are a bunch of number patterns that tell MS Teams how to route calls to reach the appropriate destination. In this blueprint setup, we'll be creating 7 voice routes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"UK-London-Local \u2013 To London landlines"),(0,i.kt)("li",{parentName:"ul"},"UK-London-Mobile \u2013 To UK mobiles"),(0,i.kt)("li",{parentName:"ul"},"UK-London-Tollfree \u2013 To freephone numbers"),(0,i.kt)("li",{parentName:"ul"},"UK-London-Premium \u2013 To premium rate numbers"),(0,i.kt)("li",{parentName:"ul"},"UK-London-National \u2013 To UK landlines (including London landlines)"),(0,i.kt)("li",{parentName:"ul"},"UK-London-Service \u2013 To service numbers"),(0,i.kt)("li",{parentName:"ul"},"UK-London-International \u2013 To non-UK numbers")),(0,i.kt)("h3",{id:"voice-routing-policies-vrp"},"Voice Routing Policies (VRP)"),(0,i.kt)("p",null,"A Voice Routing Policy allows you to tell MS Teams how to route a phone number. In the blueprint setup, we'll be 3 VRP including the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"UK-London-Local \u2013 This policy includes the Internal, Local, Tollfree and Service routes"),(0,i.kt)("li",{parentName:"ul"},"UK-London-National \u2013 This policy additionally includes the Mobile and National routes"),(0,i.kt)("li",{parentName:"ul"},"UK-London-International \u2013 This policy additionally includes the International route")),(0,i.kt)("h3",{id:"dial-plan-dp"},"Dial Plan (DP)"),(0,i.kt)("p",null,"A Dial Plan normalises calls with the MS Teams client. For example, say you're in the UK dialing a UK mobile number a type: 07825382836, this number will be translated into ",(0,i.kt)("strong",{parentName:"p"},"+44"),"7825382836, as it recognises is as a UK mobile number. In this blueprint setup, we'll just be creating the one dial plan for London:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"UK-London")))}d.isMDXComponent=!0},3071:function(e,t,n){t.Z=n.p+"assets/images/ms-teams-direct-routing-b5b2c415edd06baf5fe982d64d69c7c4.png"}}]);