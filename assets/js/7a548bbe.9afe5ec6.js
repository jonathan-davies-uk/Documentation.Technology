"use strict";(self.webpackChunkdocumentation_technology=self.webpackChunkdocumentation_technology||[]).push([[9142],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=r,h=p["".concat(c,".").concat(m)]||p[m]||u[m]||i;return n?o.createElement(h,a(a({ref:t},d),{},{components:n})):o.createElement(h,a({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var s=2;s<i;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2894:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},assets:function(){return d},toc:function(){return u},default:function(){return m}});var o=n(7462),r=n(3366),i=(n(7294),n(3905)),a=["components"],l={sidebar_position:1},c="Warning and Error Codes",s={unversionedId:"troubleshooting/ad-error-codes",id:"troubleshooting/ad-error-codes",title:"Warning and Error Codes",description:"Troubleshooting Active Directory warning codes",source:"@site/active-directory/troubleshooting/ad-error-codes.md",sourceDirName:"troubleshooting",slug:"/troubleshooting/ad-error-codes",permalink:"/active-directory/troubleshooting/ad-error-codes",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Decommissioning 2012, 2012R2 and 2016 Functional Level DC",permalink:"/active-directory/ad-decommission/decommission-2012-2016-functional-level-dc"},next:{title:"NTDS Database Corrupt",permalink:"/active-directory/troubleshooting/ntds-database-corrupt"}},d={},u=[{value:"Troubleshooting Active Directory warning codes",id:"troubleshooting-active-directory-warning-codes",level:2},{value:"Warning Event ID: 1220",id:"warning-event-id-1220",level:3},{value:"Explanation",id:"explanation",level:4},{value:"Solution",id:"solution",level:4},{value:"Warning Event ID: 1588",id:"warning-event-id-1588",level:3},{value:"Explanation",id:"explanation-1",level:4},{value:"Solution",id:"solution-1",level:4},{value:"Warning Event ID: 2088",id:"warning-event-id-2088",level:3},{value:"Explanation",id:"explanation-2",level:4},{value:"Solution",id:"solution-2",level:4},{value:"Warning Event ID: 2089",id:"warning-event-id-2089",level:3},{value:"Explanation",id:"explanation-3",level:4},{value:"Solution",id:"solution-3",level:4},{value:"Troubleshooting Active Directory error codes",id:"troubleshooting-active-directory-error-codes",level:2},{value:"Error Event ID: 1864",id:"error-event-id-1864",level:3},{value:"Explanation",id:"explanation-4",level:4},{value:"Solution",id:"solution-4",level:4},{value:"Error Event ID: 5774, 5781, 5783",id:"error-event-id-5774-5781-5783",level:3},{value:"Explanation",id:"explanation-5",level:4},{value:"Solution",id:"solution-5",level:4}],p={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"warning-and-error-codes"},"Warning and Error Codes"),(0,i.kt)("h2",{id:"troubleshooting-active-directory-warning-codes"},"Troubleshooting Active Directory warning codes"),(0,i.kt)("h3",{id:"warning-event-id-1220"},"Warning Event ID: 1220"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Log: Directory Service\nType: Warning\nEvent: 1220\nAlert Time: 2021-05-16 01:00:29Z\nEvent Time: 11:59:04 PM 15-May-2021 UTC\nSource: ActiveDirectory_DomainService\nCategory: LDAP Interface\nUsername: N/A\nComputer: SERVER-DC-04.EUROPE.DOMAIN.NET\nDescription: LDAP over Secure Sockets Layer (SSL) will be unavailable at this time because the server was unable to obtain a certificate.\n\nAdditional Data\nError value:\n8009030e No credentials are available in the security package\n")),(0,i.kt)("h4",{id:"explanation"},"Explanation"),(0,i.kt)("p",null,"The Warning Event ID 1220 is logged on a domain controller when a client workstation attmepts to make an LDAP over SSL connection to active directory. This normally happens when LDAPS is not enabled on the directory."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://social.technet.microsoft.com/wiki/contents/articles/2979.event-id-1220-ldap-over-ssl-ldaps.aspx"},"https://social.technet.microsoft.com/wiki/contents/articles/2979.event-id-1220-ldap-over-ssl-ldaps.aspx")),(0,i.kt)("h4",{id:"solution"},"Solution"),(0,i.kt)("p",null,"Give the Domain Controller a domain controller certificate if there is an internal PKI server in place."),(0,i.kt)("h3",{id:"warning-event-id-1588"},"Warning Event ID: 1588"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Log: Directory Service\nType: Warning\nEvent: 1588\nAlert Time: 2017-09-29 12:19:28Z\nEvent Time: 11:19:00 AM 29-Sep-2017 UTC\nSource: ActiveDirectory_DomainService\nCategory: Replication\nUsername: ANONYMOUS LOGON\nComputer: DOMAINDC.domain.com\nDescription: The following deleted object does not have the proper value for the following attribute. \n\nObject:\nDC=DEASSP42\\0ACNF:27084bd0-5cad-56af-b118-4572f3a0872e,DC=domain.com,CN=MicrosoftDNS,DC=DomainDnsZones,DC=domain,DC=com\nObject GUID:\n27084bd0-5cad-41ff-b118-4572f3a0872e \nAttribute:\n90001 (name) \n\nAn attempt is usually made to preserve the attribute values of deleted objects, even when incoming changes are more recent. However, in this case, the attribute value of the deleted object was not a proper value. As a result, the incoming attribute change was applied.\n")),(0,i.kt)("h4",{id:"explanation-1"},"Explanation"),(0,i.kt)("p",null,"There are lingering objects on the current DC."),(0,i.kt)("h4",{id:"solution-1"},"Solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Find out the following fields by colour co-ordinated."),(0,i.kt)("li",{parentName:"ol"},"The GUID can, open up active directory and go to Domain Controllers"),(0,i.kt)("li",{parentName:"ol"},"Right-click Properties on the DC you want"),(0,i.kt)("li",{parentName:"ol"},"Click NTDS Settings and the GUID will be under DNS Alias. Note it's the first part, without the ._msdcs bit"),(0,i.kt)("li",{parentName:"ol"},"Clear up lingering objects by running this command as administrator in cmd:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"REPADMIN /REMOVELINGERINGOBJECTS DOMAINDC.domain.com 0D352E4E-9AV1-43B6-81A5-15D993E3779E DC=domain,DC=com /advisory_mode")))),(0,i.kt)("li",{parentName:"ol"},"Replicate AD with the command:\n",(0,i.kt)("inlineCode",{parentName:"li"},"Repadmin /syncall /adep")),(0,i.kt)("li",{parentName:"ol"},"Check to make sure there are no further warnings or errors in the Directory Service event log")),(0,i.kt)("h3",{id:"warning-event-id-2088"},"Warning Event ID: 2088"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Log: Directory Service\nType: Warning\nEvent: 2088\nAlert Time: 2016-04-27 21:30:06Z\nEvent Time: 11:29:03 AM 27-Apr-2016 UTC\nSource: ActiveDirectory_DomainService\nCategory: DS RPC Client\nUsername: ANONYMOUS LOGON\nComputer: DC03.cjp.co.uk\nDescription: Active Directory Domain Services could not use DNS to resolve the IP address of the source domain controller listed below. To maintain the consistency of Security groups, group policy, users and computers and their passwords, Active Directory Domain Services successfully replicated using the NetBIOS or fully qualified computer name of the source domain controller. \n\nInvalid DNS configuration may be affecting other essential operations on member computers, domain controllers or application servers in this Active Directory Domain Services forest, including logon authentication or access to network resources. \n\nYou should immediately resolve this DNS configuration error so that this domain controller can resolve the IP address of the source domain controller using DNS. \n\nAlternate server name: \nDCO4.domain.com\nFailing DNS host name: \n8bb5d085-9257-46a4-a0e5-3c377fd1545b._msdcs.domain.com\n")),(0,i.kt)("h4",{id:"explanation-2"},"Explanation"),(0,i.kt)("p",null,"There was a DNS lookup failure occured when replication was successful."),(0,i.kt)("h4",{id:"solution-2"},"Solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If the source domain controller is no longer functioning or its operating system has been reinstalled with a different computer or object GUID, remove the source domain controllers metadata with ntdsutil.exe - you can find out how to do this under Decomissioning Active Directory")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Confirm the source domain controller is ADDS services are running and accessible through the following:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"net view \\\\8bb5d085-9257-46a4-a0e5-3c377fd1545b._msdcs.domain.com ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ping 8bb5d085-9257-46a4-a0e5-3c377fd1545b._msdcs.domain.com ")))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify the source domain controller is using valid DNS and that the host record and CNAME record are correct. The ",(0,i.kt)("inlineCode",{parentName:"p"},"dcdiag /test:dns")," is useful in this scenario."))),(0,i.kt)("h3",{id:"warning-event-id-2089"},"Warning Event ID: 2089"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Log: Directory Service\nType: Warning\nEvent: 2089\nAlert Time: 2021-04-19 01:12:36Z\nEvent Time: 12:11:09 AM 19-Apr-2021 UTC\nSource: ActiveDirectory_DomainService\nCategory: Backup\nUsername: ANONYMOUS LOGON\nComputer: DC01.domain.com\nDescription: This directory partition has not been backed up since at least the following number of days.\n\nDirectory partition:\nDC=domain,DC=com\n\n'Backup latency interval' (days):\n90\n\nIt is recommended that you take a backup as often as possible to recover from accidental loss of data. However if you haven't taken a backup since at least the ''''backup latency interval'''' number of days, this message will be logged every day until a backup is taken. You can take a backup of any replica that holds this partition.\n\nBy default the 'Backup latency interval' is set to half the 'Tombstone Lifetime Interval'. If you want to change the default 'Backup latency interval', you could do so by adding the following registry key.\n\n'Backup latency interval' (days) registry key:\nSystem\\\\CurrentControlSet\\\\Services\\\\NTDS\\\\Parameters\\\\Backup Latency Threshold (days)\n")),(0,i.kt)("h4",{id:"explanation-3"},"Explanation"),(0,i.kt)("p",null,"Active Directory hasn't backed up in 90 days."),(0,i.kt)("h4",{id:"solution-3"},"Solution"),(0,i.kt)("p",null,"If you're using application aware backups through the likes of Veeam or Backup Exec, ensure it's enabled for the DC in question. It's crucial that you have an up to date backup of AD, should disaster scenario occur."),(0,i.kt)("p",null,"The following command shows the last backup:\n",(0,i.kt)("inlineCode",{parentName:"p"},"repadmin /showbackup")),(0,i.kt)("p",null,"If your backups do not support application aware, you could do a one off backup using Windows Server Backups."),(0,i.kt)("p",null,"Cannot backup AD and want to supress the alerts? You can change the threshold if enabling guest processing isn't an option:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open up regedit"),(0,i.kt)("li",{parentName:"ol"},"Locate and then click the following registry subkey:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\NTDS\\Parameters ")))),(0,i.kt)("li",{parentName:"ol"},"Right-click Parameters, point to New, and then click DWORD Value. "),(0,i.kt)("li",{parentName:"ol"},"Type ",(0,i.kt)("inlineCode",{parentName:"li"},"Backup Latency Threshold (days)"),", and then press ENTER. "),(0,i.kt)("li",{parentName:"ol"},"Right-click ",(0,i.kt)("inlineCode",{parentName:"li"},"Backup Latency Threshold (days)"),", and then click Modify. "),(0,i.kt)("li",{parentName:"ol"},"In the Value data box, type the number of days to use as a threshold, and then click OK.")),(0,i.kt)("h2",{id:"troubleshooting-active-directory-error-codes"},"Troubleshooting Active Directory error codes"),(0,i.kt)("h3",{id:"error-event-id-1864"},"Error Event ID: 1864"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'Log: Directory Service\nType: Error\nEvent: 1864\nAlert Time: 2017-04-19 02:51:53Z\nEvent Time: 01:50:43 AM 19-Apr-2017 UTC\nSource: ActiveDirectory_DomainService\nCategory: Replication\nUsername: ANONYMOUS LOGON\nComputer: dc.domain.com\nDescription: This is the replication status for the following directory partition on this directory server. \n\nDirectory partition:\nDC=domain,DC=com \n\nThis directory server has not recently received replication information from a number of directory servers. The count of directory servers is shown, divided into the following intervals. \n\nMore than 24 hours:\n1 \nMore than a week:\n1 \nMore than one month:\n1 \nMore than two months:\n0 \nMore than a tombstone lifetime:\n0 \nTombstone lifetime (days):\n60 \n\nDirectory servers that do not replicate in a timely manner may encounter errors. They may miss password changes and be unable to authenticate. A DC that has not replicated in a tombstone lifetime may have missed the deletion of some objects, and may be automatically blocked from future replication until it is reconciled. \n\nTo identify the directory servers by name, use the dcdiag.exe tool. \nYou can also use the support tool repadmin.exe to display the replication latencies of the directory servers. The command is "repadmin /showvector /latency <partition-dn>".\n')),(0,i.kt)("h4",{id:"explanation-4"},"Explanation"),(0,i.kt)("p",null,"The domain controller hasn't checked in for the time length displayed and is close to tombstoning."),(0,i.kt)("h4",{id:"solution-4"},"Solution"),(0,i.kt)("p",null,"Find out when DCs have last checked in:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'repadmin /showvector /latency <FQDN of partion, e.g. CN=Configuration,DC=domain,DC=com>\nrepadmin /showvector /latency domain.com\nrepadmin /showvector /latency "CN=Configuration,DC=domain,DC=com"\n')),(0,i.kt)("p",null,"Find out why you cannot communicate to the server"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Decommissioned?"),(0,i.kt)("li",{parentName:"ul"},"Routing issue?"),(0,i.kt)("li",{parentName:"ul"},"Firewall?"),(0,i.kt)("li",{parentName:"ul"},"Server offline?")),(0,i.kt)("h3",{id:"error-event-id-5774-5781-5783"},"Error Event ID: 5774, 5781, 5783"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Log: System\nType: Error\nEvent: 5774\nAlert Time: 2016-04-26 18:13:38Z\nEvent Time: 05:12:47 PM 26-Apr-2016 UTC\nSource: NETLOGON\nCategory: None\nUsername: N/A\nComputer: DC-01.ad.domain.com\nDescription: The dynamic registration of the DNS record '_ldap._tcp.pdc._msdcs.ad.domain.com. 600 IN SRV 0 100 389 DC-01.ad.domain.com.' failed on the following DNS server: \n")),(0,i.kt)("h4",{id:"explanation-5"},"Explanation"),(0,i.kt)("p",null,"You're using a third-party DNS server application for DNS updates. Either that or your DNS have failed to resolve itself."),(0,i.kt)("h4",{id:"solution-5"},"Solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Nltest.exe /dsregdns"),(0,i.kt)("li",{parentName:"ol"},"Restart the netlogon service"),(0,i.kt)("li",{parentName:"ol"},"Open cmd as admin and type the following:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Net stop netlogon"),(0,i.kt)("li",{parentName:"ul"},"Net start netlogon"))),(0,i.kt)("li",{parentName:"ol"},"Check the System event log and make sure the 5774 didn't get regenerated after you restarted the service."),(0,i.kt)("li",{parentName:"ol"},"Things to check on DNS",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Dcdiag /test:dns"),(0,i.kt)("li",{parentName:"ul"},"Check Forwarders"),(0,i.kt)("li",{parentName:"ul"},"Check Name Servers"),(0,i.kt)("li",{parentName:"ul"},"Check Root Hints"),(0,i.kt)("li",{parentName:"ul"},"Check DNS records")))))}m.isMDXComponent=!0}}]);