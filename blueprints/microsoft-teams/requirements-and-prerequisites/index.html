<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Technical Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Technical Documentation Atom Feed"><title data-rh="true">Requirements and Prerequisites | Technical Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://documentation.technology/blueprints/microsoft-teams/requirements-and-prerequisites"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-blueprints-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-blueprints-current"><meta data-rh="true" property="og:title" content="Requirements and Prerequisites | Technical Documentation"><meta data-rh="true" name="description" content="Microsoft Teams Planning"><meta data-rh="true" property="og:description" content="Microsoft Teams Planning"><link data-rh="true" rel="icon" href="/img/logos/favicon.ico"><link data-rh="true" rel="canonical" href="https://documentation.technology/blueprints/microsoft-teams/requirements-and-prerequisites"><link data-rh="true" rel="alternate" href="https://documentation.technology/blueprints/microsoft-teams/requirements-and-prerequisites" hreflang="en"><link data-rh="true" rel="alternate" href="https://documentation.technology/blueprints/microsoft-teams/requirements-and-prerequisites" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c3623c56.css">
<link rel="preload" href="/assets/js/runtime~main.09c0e4bb.js" as="script">
<link rel="preload" href="/assets/js/main.22e362bf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarContent_KsVm"><div id="color-bar"><div class="color-bar-1"></div><div class="color-bar-2"></div><div class="color-bar-3"></div><div class="color-bar-4"></div><div class="color-bar-5"></div><div class="color-bar-6"></div></div></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logos/ts-long@4x.png" alt="Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logos/ts-long@4x.png" alt="Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link" docid="intro" href="/telephony/microsoft-teams/connecting-to-teams">Telephony</a><a class="navbar__item navbar__link" docid="intro" href="/backups/introduction">Backups</a><a class="navbar__item navbar__link" docid="intro" href="/SSL-Certificates/using-openssl-to-convert-certificates/convert-ssl-certificates">SSL Certificates</a><a class="navbar__item navbar__link" docid="intro" href="/cyber-security/dns/protecting-a-parked-domain">Cyber Security</a><a class="navbar__item navbar__link" docid="intro" href="/active-directory/what-is-active-directory">Active Directory</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" docid="intro" href="/blueprints/intro">Setting up Blueprints</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blueprints/intro">Blueprints</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/blueprints/always-on-vpn/">Always On VPN (AOVPN)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Always On VPN (AOVPN)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/blueprints/microsoft-teams/requirements-and-prerequisites">Microsoft Teams</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blueprints/microsoft-teams/requirements-and-prerequisites">Requirements and Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blueprints/microsoft-teams/setup-your-sbc">1. Connect your SBC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blueprints/microsoft-teams/setup-voiceroutes-voiceroutingpolicies-dialplans">2. Setup Voice Routes, Voice routing policies and Dial Plans</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blueprints/microsoft-teams/setup-user">3. Setup Users</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blueprints/microsoft-teams/setup-auto-attendant-and-call-queue">4. Setup Auto Attendant and Call Queue</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Microsoft Teams</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/blueprints/microsoft-teams/requirements-and-prerequisites">Requirements and Prerequisites</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Requirements and Prerequisites</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="microsoft-teams-planning">Microsoft Teams Planning<a class="hash-link" href="#microsoft-teams-planning" title="Direct link to heading">‚Äã</a></h2><p>This Microsoft Teams blueprint will harness MS Teams Direct Routing. Direct Routing allows you to bring a number from a carrier into Microsoft by harnessing SBC&#x27;s.</p><p>This Microsoft Teams blueprint <strong>will not cover</strong> Microsoft Phone numbers.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="assumptions">Assumptions<a class="hash-link" href="#assumptions" title="Direct link to heading">‚Äã</a></h3><p>This blueprint assumes that you already have a domain controller setup, with the relevant users that are synced to Microsoft 365 with Azure AD connect. This setup also assumes that you already have a carrier that provides you with phone number range, and that a SIP trunk is already setup to an SBC and from that SBC, direct routing configuration on the SBC has already been setup. This guide will only be running through the Teams setup of Direct Routing. It is already assumed that the network has been prepared with the relevant ports open; a list of the networking requirements can be viewed below.</p><ul><li>SBC FQDN: sbc.domain.com - must be an encrypted SIP trunk bound with a certficiate</li><li>SIP Signalling Port: 5061</li><li>Phone number range: 02074445500 - 02074445539 </li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="licenses">Licenses<a class="hash-link" href="#licenses" title="Direct link to heading">‚Äã</a></h3><p>At least one of base plan and voice calling options licenses must be assigned to users in order to use Microsoft Teams and then use the Phone System.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="base-plan">Base Plan<a class="hash-link" href="#base-plan" title="Direct link to heading">‚Äã</a></h4><p>The base plans licenses will cover the user to be able to install the Microsoft Teams applications, the licenses that include Microsoft Teams include:</p><ul><li>MS 365 Business Basic/Standard/Business Premium</li><li>MS Teams Essenttial (AAD Identity)</li><li>MS 365 Enterprise E1/E3/E5</li><li>Office 365 Enterprise E1/E3/E5</li><li>MS 365 F1/F3</li><li>Office 365 F3</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="voice-calling-options">Voice calling options<a class="hash-link" href="#voice-calling-options" title="Direct link to heading">‚Äã</a></h4><p>The voice calling options allow the user to make a phone call through MS Teams. Without this license, a user will not be able to make or receive external phone calls. The licenses that include voice calling options include:</p><ul><li>Microsoft Phone System</li><li>Microsoft Teams Phone (without Calling Plan)</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="user-setup-permissions">User setup Permissions<a class="hash-link" href="#user-setup-permissions" title="Direct link to heading">‚Äã</a></h3><ul><li>Teams Administrator or Global Administrator</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="planning-diagram">Planning diagram<a class="hash-link" href="#planning-diagram" title="Direct link to heading">‚Äã</a></h3><p><img loading="lazy" alt="Two Tier PKI" src="/assets/images/ms-teams-direct-routing-b5b2c415edd06baf5fe982d64d69c7c4.png" width="1871" height="1323"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="networking-requirements">Networking Requirements<a class="hash-link" href="#networking-requirements" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="sip-signalling-ports">SIP Signalling Ports<a class="hash-link" href="#sip-signalling-ports" title="Direct link to heading">‚Äã</a></h4><table><thead><tr><th>Traffic</th><th>From</th><th>To</th><th>Source Port</th><th>Destination Port</th></tr></thead><tbody><tr><td>SIP/TLS</td><td>52.112.0.0/14, 52.120.0.0/14</td><td>sbc.domain.com</td><td>1024 - 65535</td><td>5061</td></tr><tr><td>SIP/TLS</td><td>sbc.domain.com</td><td>52.112.0.0/14, 52.120.0.0/14</td><td>any</td><td>5061</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="media-ports">Media Ports<a class="hash-link" href="#media-ports" title="Direct link to heading">‚Äã</a></h4><table><thead><tr><th>Traffic</th><th>From</th><th>To</th><th>Source Port</th><th>Destination Port</th></tr></thead><tbody><tr><td>UDP/SRTP</td><td>52.112.0.0/14, 52.120.0.0/14</td><td>sbc.domain.com</td><td>3478 - 3481 and 49152 - 53247</td><td>5061</td></tr><tr><td>UDP/SRTP</td><td>sbc.domain.com</td><td>52.112.0.0/14, 52.120.0.0/14</td><td>any</td><td>3478 - 3481 and 49152 - 53247</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="microsoft-terms-glossary">Microsoft terms (glossary)<a class="hash-link" href="#microsoft-terms-glossary" title="Direct link to heading">‚Äã</a></h2><p>The Microsoft Teams terms you see below are terms that will be used throughout this blueprint setup. Make yourself familiar with them, as I&#x27;ll likely be using the abbreviations. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="microsoft-teams-ms-teams">Microsoft Teams (MS Teams)<a class="hash-link" href="#microsoft-teams-ms-teams" title="Direct link to heading">‚Äã</a></h3><p>Microsoft Teams is a collaboration tool used between teams for the likes of chat, group conversation, phone system, meetings, live events, channels and teams.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ms-teams-phone-system">MS Teams Phone System<a class="hash-link" href="#ms-teams-phone-system" title="Direct link to heading">‚Äã</a></h3><p>MS Teams as a Phone System allows you to make external calls and receive external calls into the MS Teams application.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="teams-admin-center-tac">Teams Admin Center (TAC)<a class="hash-link" href="#teams-admin-center-tac" title="Direct link to heading">‚Äã</a></h3><p>The TAC is predominantly used to setup MS Teams for Direct Routing. It can be accessed from the following URL: <a href="https://admin.teams.microsoft.com" target="_blank" rel="noopener noreferrer">https://admin.teams.microsoft.com</a> with a Teams Administrator or Global Administrator account.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="direct-routing">Direct Routing<a class="hash-link" href="#direct-routing" title="Direct link to heading">‚Äã</a></h3><p>Direct Routing allows you to connect a supported SBC to MS Teams Phone System. This means you can carry across your own phone range to Microsoft Teams, without purchasing any newer DDI&#x27;s.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="session-border-controller-sbc">Session Border Controller (SBC)<a class="hash-link" href="#session-border-controller-sbc" title="Direct link to heading">‚Äã</a></h3><p>An SBC is essentially a firewall for phones. The SBC in this instance will be used to connect a telephony provider to MS Teams through Direct Routing. A SIP trunk will be setup with the PSTN provider and an encrypted SIP trunk will be setup using Direct Routing to MS Teams.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="voice-routes">Voice routes<a class="hash-link" href="#voice-routes" title="Direct link to heading">‚Äã</a></h3><p>Voice routes are a bunch of number patterns that tell MS Teams how to route calls to reach the appropriate destination. In this blueprint setup, we&#x27;ll be creating 7 voice routes:</p><ul><li>UK-London-Local ‚Äì To London landlines</li><li>UK-London-Mobile ‚Äì To UK mobiles</li><li>UK-London-Tollfree ‚Äì To freephone numbers</li><li>UK-London-Premium ‚Äì To premium rate numbers</li><li>UK-London-National ‚Äì To UK landlines (including London landlines)</li><li>UK-London-Service ‚Äì To service numbers</li><li>UK-London-International ‚Äì To non-UK numbers</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="voice-routing-policies-vrp">Voice Routing Policies (VRP)<a class="hash-link" href="#voice-routing-policies-vrp" title="Direct link to heading">‚Äã</a></h3><p>A Voice Routing Policy allows you to tell MS Teams how to route a phone number. In the blueprint setup, we&#x27;ll be 3 VRP including the following:</p><ul><li>UK-London-Local ‚Äì This policy includes the Internal, Local, Tollfree and Service routes</li><li>UK-London-National ‚Äì This policy additionally includes the Mobile and National routes</li><li>UK-London-International ‚Äì This policy additionally includes the International route</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="dial-plan-dp">Dial Plan (DP)<a class="hash-link" href="#dial-plan-dp" title="Direct link to heading">‚Äã</a></h3><p>A Dial Plan normalises calls with the MS Teams client. For example, say you&#x27;re in the UK dialing a UK mobile number a type: 07825382836, this number will be translated into <strong>+44</strong>7825382836, as it recognises is as a UK mobile number. In this blueprint setup, we&#x27;ll just be creating the one dial plan for London:</p><ul><li>UK-London</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blueprints/always-on-vpn/configure-windows-10-aovpn-connections"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">8. Configure Windows 10 AOVPN Connections</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blueprints/microsoft-teams/setup-your-sbc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">1. Connect your SBC</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#microsoft-teams-planning" class="table-of-contents__link toc-highlight">Microsoft Teams Planning</a><ul><li><a href="#assumptions" class="table-of-contents__link toc-highlight">Assumptions</a></li><li><a href="#licenses" class="table-of-contents__link toc-highlight">Licenses</a></li><li><a href="#user-setup-permissions" class="table-of-contents__link toc-highlight">User setup Permissions</a></li><li><a href="#planning-diagram" class="table-of-contents__link toc-highlight">Planning diagram</a></li><li><a href="#networking-requirements" class="table-of-contents__link toc-highlight">Networking Requirements</a></li></ul></li><li><a href="#microsoft-terms-glossary" class="table-of-contents__link toc-highlight">Microsoft terms (glossary)</a><ul><li><a href="#microsoft-teams-ms-teams" class="table-of-contents__link toc-highlight">Microsoft Teams (MS Teams)</a></li><li><a href="#ms-teams-phone-system" class="table-of-contents__link toc-highlight">MS Teams Phone System</a></li><li><a href="#teams-admin-center-tac" class="table-of-contents__link toc-highlight">Teams Admin Center (TAC)</a></li><li><a href="#direct-routing" class="table-of-contents__link toc-highlight">Direct Routing</a></li><li><a href="#session-border-controller-sbc" class="table-of-contents__link toc-highlight">Session Border Controller (SBC)</a></li><li><a href="#voice-routes" class="table-of-contents__link toc-highlight">Voice routes</a></li><li><a href="#voice-routing-policies-vrp" class="table-of-contents__link toc-highlight">Voice Routing Policies (VRP)</a></li><li><a href="#dial-plan-dp" class="table-of-contents__link toc-highlight">Dial Plan (DP)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About Me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.jonathandavies.uk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>My CV<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/jonathan-davies-uk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>My GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://linkedin.com/in/spud/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>My LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.microsoft.com/en-gb/users/spud/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>My Microsoft Profile<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Technical Documentation, built with love for the craft.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.09c0e4bb.js"></script>
<script src="/assets/js/main.22e362bf.js"></script>
</body>
</html>